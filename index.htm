<!DOCTYPE html>
<html lang=en>
<head>
	<meta charset=utf-8>
	<title>Carto</title>
	<link href='http://fonts.googleapis.com/css?family=Droid+Serif' rel='stylesheet' type='text/css'>
	<link href="http://fonts.googleapis.com/css?family=Orbitron:400,700" rel="stylesheet" type="text/css">
	<link rel="stylesheet" href="css/base.css" />
	<link rel="stylesheet" href="css/carto.css" />
</head>
<body>
	<div style="height:720px">
		<section id="tool_container" >
			<div class="tool tool_rect"></div>
		</section>
		<div id="panel_container" style="margin-left:50px;background-color:#282828; width:1500px; height:720px;">
			<canvas id="bottom" width="1280px" height="720px" style= "position: absolute;left: 100; top: 100;z-index:0;" ></canvas>
			<canvas id="background" width="1280px" height="720px" style= "position: absolute;left: 100; top: 100;z-index:1;" ></canvas>
			<canvas id="layer1" width="1280px" height="720px" style= "position: absolute;left: 100; top: 100;z-index:2;" ></canvas>
			<canvas id="simulator" width="1280px" height="720px" style= "position: absolute;left: 100; top: 100; z-index:3;"></canvas>
			<canvas id="temp" width="1280px" height="720px" style= "position: absolute;left: 100; top: 100; z-index:4;"></canvas>
		</div>
	</div>
	<div>
		<div id="background_path" style="float:left">background-path:</div>
		<input type="file" id="fname"  size="0" onchange="loadImageFile()"  />
	</div>
	<footer>
		<p>footer here</p>
	</footer>
	<script src="js/jquery-1.9.1.min.js"></script>
	<script src="js/Canvas.js"></script>
	<script src="js/init.js"></script>
	<script>
function displayResult()
{
var x=document.getElementById("fname").value;
//var d=document.getElementById("background_path");
$("#background_path").html("background-path:"+x);
var img=new Image(); 
img.src=x; 
canvas = document.getElementById("background");
context = canvas.getContext('2d');
context.drawImage(img,0,0);
//alert(x);
//d.value=x;
}
oFReader = new FileReader(), rFilter = /^(?:image\/bmp|image\/cis\-cod|image\/gif|image\/ief|image\/jpeg|image\/jpeg|image\/jpeg|image\/pipeg|image\/png|image\/svg\+xml|image\/tiff|image\/x\-cmu\-raster|image\/x\-cmx|image\/x\-icon|image\/x\-portable\-anymap|image\/x\-portable\-bitmap|image\/x\-portable\-graymap|image\/x\-portable\-pixmap|image\/x\-rgb|image\/x\-xbitmap|image\/x\-xpixmap|image\/x\-xwindowdump)$/i;
 
oFReader.onload = function (oFREvent) {
var path=oFREvent.target.result;
var img=new Image(); 
img.src=path;
canvas = document.getElementById("background");
context = canvas.getContext('2d');
context.drawImage(img,0,0);

// var x=document.getElementById("fname").value;
// $("#background_path").html("background-path:"+x);
};
 
function loadImageFile() {
  if (document.getElementById("fname").files.length === 0) { return; }
  var oFile = document.getElementById("fname").files[0];
  if (!rFilter.test(oFile.type)) { alert("You must select a valid image file!"); return; }
  oFReader.readAsDataURL(oFile);
}
</script>
</body>
</html>